<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶Ö‡¶ß‡ßç‡¶Ø‡¶Ø‡¶º‡¶® ‡¶∏‡¶ô‡ßç‡¶ò - Profile & Settings</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        .bengali-title { font-family: 'Noto Sans Bengali', sans-serif; }
        .profile-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
        }
        .profile-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            border: 4px solid white;
            object-fit: cover;
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        .profile-avatar:hover {
            transform: scale(1.05);
        }
        .stat-card {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
        }
        .stat-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .nav-pills .nav-link.active {
            background-color: #667eea;
            border-color: #667eea;
        }
        .nav-pills .nav-link {
            color: #6c757d;
            border-radius: 8px;
            margin-bottom: 5px;
        }
        .settings-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 20px;
        }
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: #667eea;
        }
        input:checked + .slider:before {
            transform: translateX(26px);
        }
        .achievement-badge {
            display: inline-block;
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #333;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            margin: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .study-streak {
            background: linear-gradient(45deg, #ff6b6b, #ffa500);
            color: white;
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            margin: 10px 0;
        }
        .preference-card {
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .preference-card:hover {
            border-color: #667eea;
            background-color: #f8f9fa;
        }
        .preference-card.selected {
            border-color: #667eea;
            background-color: #e3f2fd;
        }
    </style>
</head>
<body class="bg-light">
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand bengali-title" href="/real-time-ai-dashboard.html">
                <i class="fas fa-brain me-2"></i>
                ‡¶Ö‡¶ß‡ßç‡¶Ø‡¶Ø‡¶º‡¶® ‡¶∏‡¶ô‡ßç‡¶ò
            </a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link" href="/real-time-ai-dashboard.html">
                    <i class="fas fa-tachometer-alt me-1"></i>Dashboard
                </a>
                <a class="nav-link active" href="#">
                    <i class="fas fa-user me-1"></i>Profile
                </a>
                <a class="nav-link" href="/schedules.html">
                    <i class="fas fa-calendar me-1"></i>Schedules
                </a>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <!-- Profile Header -->
        <div class="profile-header">
            <div class="row align-items-center">
                <div class="col-md-3 text-center">
                    <img src="https://via.placeholder.com/120x120/667eea/ffffff?text=PU"
                         alt="Profile Avatar"
                         class="profile-avatar"
                         id="profileAvatar">
                    <input type="file" id="avatarUpload" class="d-none" accept="image/*">
                    <div class="mt-2">
                        <button class="btn btn-outline-light btn-sm" onclick="document.getElementById('avatarUpload').click()">
                            <i class="fas fa-camera me-1"></i>Change Photo
                        </button>
                    </div>
                </div>
                <div class="col-md-6">
                    <h2 class="mb-2" id="userName">Punam Ahmed</h2>
                    <p class="mb-1">
                        <i class="fas fa-graduation-cap me-2"></i>
                        Computer Science Student
                    </p>
                    <p class="mb-1">
                        <i class="fas fa-envelope me-2"></i>
                        punam@example.com
                    </p>
                    <p class="mb-3">
                        <i class="fas fa-calendar-plus me-2"></i>
                        Member since September 2024
                    </p>
                    <div class="study-streak">
                        <div class="row text-center">
                            <div class="col-4">
                                <div class="h3 mb-0">üî•</div>
                                <div class="h4 mb-0" id="currentStreak">7</div>
                                <small>Day Streak</small>
                            </div>
                            <div class="col-4">
                                <div class="h3 mb-0">üìö</div>
                                <div class="h4 mb-0" id="totalSessions">45</div>
                                <small>Sessions</small>
                            </div>
                            <div class="col-4">
                                <div class="h3 mb-0">‚è±Ô∏è</div>
                                <div class="h4 mb-0" id="totalHours">127</div>
                                <small>Hours</small>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stat-card">
                        <h4 class="text-primary mb-2" id="studyEfficiency">85%</h4>
                        <h6 class="text-muted mb-0">Study Efficiency</h6>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <!-- Navigation Sidebar -->
            <div class="col-md-3">
                <div class="card border-0 shadow-sm">
                    <div class="card-body">
                        <nav class="nav nav-pills flex-column">
                            <a class="nav-link active" data-tab="overview" href="#overview">
                                <i class="fas fa-user me-2"></i>Profile Overview
                            </a>
                            <a class="nav-link" data-tab="analytics" href="#analytics">
                                <i class="fas fa-chart-bar me-2"></i>Study Analytics
                            </a>
                            <a class="nav-link" data-tab="preferences" href="#preferences">
                                <i class="fas fa-cog me-2"></i>Study Preferences
                            </a>
                            <a class="nav-link" data-tab="notifications" href="#notifications">
                                <i class="fas fa-bell me-2"></i>Notifications
                            </a>
                            <a class="nav-link" data-tab="privacy" href="#privacy">
                                <i class="fas fa-shield-alt me-2"></i>Privacy & Security
                            </a>
                            <a class="nav-link" data-tab="achievements" href="#achievements">
                                <i class="fas fa-trophy me-2"></i>Achievements
                            </a>
                            <a class="nav-link" data-tab="account" href="#account">
                                <i class="fas fa-user-cog me-2"></i>Account Settings
                            </a>
                        </nav>
                    </div>
                </div>
            </div>

            <!-- Main Content -->
            <div class="col-md-9">
                <!-- Profile Overview Tab -->
                <div class="tab-content" id="overview">
                    <div class="settings-section">
                        <h5 class="mb-4">
                            <i class="fas fa-user text-primary me-2"></i>
                            Profile Information
                        </h5>
                        <form id="profileForm">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Full Name</label>
                                    <input type="text" class="form-control" value="Punam Ahmed" id="fullName">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Email Address</label>
                                    <input type="email" class="form-control" value="punam@example.com" id="email">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Phone Number</label>
                                    <input type="tel" class="form-control" value="+880 1234-567890" id="phone">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Date of Birth</label>
                                    <input type="date" class="form-control" value="2000-01-15" id="dateOfBirth">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Institution</label>
                                    <input type="text" class="form-control" value="Dhaka University" id="institution">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Field of Study</label>
                                    <select class="form-select" id="fieldOfStudy">
                                        <option value="cs" selected>Computer Science</option>
                                        <option value="eng">Engineering</option>
                                        <option value="med">Medicine</option>
                                        <option value="bus">Business</option>
                                        <option value="arts">Arts & Humanities</option>
                                        <option value="sci">Sciences</option>
                                    </select>
                                </div>
                                <div class="col-12 mb-3">
                                    <label class="form-label">Bio</label>
                                    <textarea class="form-control" rows="3" id="bio" placeholder="Tell us about yourself...">Passionate computer science student with a love for AI and machine learning. Always eager to learn new technologies and improve my coding skills.</textarea>
                                </div>
                            </div>
                            <div class="text-end">
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-save me-1"></i>Save Changes
                                </button>
                            </div>
                        </form>
                    </div>

                    <!-- Study Goals Section -->
                    <div class="settings-section">
                        <h5 class="mb-4">
                            <i class="fas fa-bullseye text-success me-2"></i>
                            Study Goals
                        </h5>
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label class="form-label">Daily Study Goal (minutes)</label>
                                <input type="number" class="form-control" value="120" min="15" max="480" id="dailyGoal">
                            </div>
                            <div class="col-md-4 mb-3">
                                <label class="form-label">Weekly Sessions Goal</label>
                                <input type="number" class="form-control" value="5" min="1" max="21" id="weeklyGoal">
                            </div>
                            <div class="col-md-4 mb-3">
                                <label class="form-label">Target GPA</label>
                                <input type="number" class="form-control" value="3.80" min="0" max="4.0" step="0.1" id="targetGPA">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Study Analytics Tab -->
                <div class="tab-content d-none" id="analytics">
                    <div class="settings-section">
                        <h5 class="mb-4">
                            <i class="fas fa-chart-bar text-info me-2"></i>
                            Detailed Study Analytics
                        </h5>

                        <!-- Analytics Cards -->
                        <div class="row mb-4">
                            <div class="col-md-3 mb-3">
                                <div class="stat-card">
                                    <i class="fas fa-percentage fa-2x text-primary mb-2"></i>
                                    <h4 id="efficiencyDetail">85%</h4>
                                    <small class="text-muted">Study Efficiency</small>
                                </div>
                            </div>
                            <div class="col-md-3 mb-3">
                                <div class="stat-card">
                                    <i class="fas fa-brain fa-2x text-success mb-2"></i>
                                    <h4 id="focusScoreDetail">78</h4>
                                    <small class="text-muted">Focus Score</small>
                                </div>
                            </div>
                            <div class="col-md-3 mb-3">
                                <div class="stat-card">
                                    <i class="fas fa-rocket fa-2x text-warning mb-2"></i>
                                    <h4 id="learningVelocityDetail">92</h4>
                                    <small class="text-muted">Learning Velocity</small>
                                </div>
                            </div>
                            <div class="col-md-3 mb-3">
                                <div class="stat-card">
                                    <i class="fas fa-sync-alt fa-2x text-info mb-2"></i>
                                    <h4 id="consistencyDetail">67</h4>
                                    <small class="text-muted">Consistency Score</small>
                                </div>
                            </div>
                        </div>

                        <!-- Study Patterns -->
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <div class="card">
                                    <div class="card-header">
                                        <h6 class="mb-0">Weekly Study Pattern</h6>
                                    </div>
                                    <div class="card-body">
                                        <canvas id="weeklyChart" height="200"></canvas>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <div class="card">
                                    <div class="card-header">
                                        <h6 class="mb-0">Subject Distribution</h6>
                                    </div>
                                    <div class="card-body">
                                        <canvas id="subjectChart" height="200"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Performance Trends -->
                        <div class="card">
                            <div class="card-header">
                                <h6 class="mb-0">Performance Trends (Last 30 Days)</h6>
                            </div>
                            <div class="card-body">
                                <canvas id="performanceChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Study Preferences Tab -->
                <div class="tab-content d-none" id="preferences">
                    <div class="settings-section">
                        <h5 class="mb-4">
                            <i class="fas fa-cog text-primary me-2"></i>
                            Study Preferences
                        </h5>

                        <!-- Preferred Study Times -->
                        <div class="mb-4">
                            <h6>Preferred Study Times</h6>
                            <p class="text-muted small">Select your most productive study periods</p>
                            <div class="row">
                                <div class="col-md-3 mb-2">
                                    <div class="preference-card card p-3 text-center" data-time="morning">
                                        <i class="fas fa-sun fa-2x text-warning mb-2"></i>
                                        <h6>Morning</h6>
                                        <small class="text-muted">6:00 AM - 12:00 PM</small>
                                    </div>
                                </div>
                                <div class="col-md-3 mb-2">
                                    <div class="preference-card card p-3 text-center selected" data-time="afternoon">
                                        <i class="fas fa-cloud-sun fa-2x text-info mb-2"></i>
                                        <h6>Afternoon</h6>
                                        <small class="text-muted">12:00 PM - 6:00 PM</small>
                                    </div>
                                </div>
                                <div class="col-md-3 mb-2">
                                    <div class="preference-card card p-3 text-center" data-time="evening">
                                        <i class="fas fa-moon fa-2x text-primary mb-2"></i>
                                        <h6>Evening</h6>
                                        <small class="text-muted">6:00 PM - 10:00 PM</small>
                                    </div>
                                </div>
                                <div class="col-md-3 mb-2">
                                    <div class="preference-card card p-3 text-center" data-time="night">
                                        <i class="fas fa-star fa-2x text-dark mb-2"></i>
                                        <h6>Late Night</h6>
                                        <small class="text-muted">10:00 PM - 2:00 AM</small>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Study Session Preferences -->
                        <div class="row mb-4">
                            <div class="col-md-6">
                                <label class="form-label">Preferred Session Duration (minutes)</label>
                                <select class="form-select" id="sessionDuration">
                                    <option value="25">25 minutes (Pomodoro)</option>
                                    <option value="45" selected>45 minutes</option>
                                    <option value="60">1 hour</option>
                                    <option value="90">90 minutes</option>
                                    <option value="120">2 hours</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Break Duration (minutes)</label>
                                <select class="form-select" id="breakDuration">
                                    <option value="5">5 minutes</option>
                                    <option value="10" selected>10 minutes</option>
                                    <option value="15">15 minutes</option>
                                    <option value="20">20 minutes</option>
                                </select>
                            </div>
                        </div>

                        <!-- Study Environment -->
                        <div class="mb-4">
                            <h6>Preferred Study Environment</h6>
                            <div class="row">
                                <div class="col-md-4 mb-2">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="quietEnvironment" checked>
                                        <label class="form-check-label" for="quietEnvironment">
                                            <i class="fas fa-volume-mute me-2"></i>Quiet Environment
                                        </label>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-2">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="backgroundMusic">
                                        <label class="form-check-label" for="backgroundMusic">
                                            <i class="fas fa-music me-2"></i>Background Music
                                        </label>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-2">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="groupStudy" checked>
                                        <label class="form-check-label" for="groupStudy">
                                            <i class="fas fa-users me-2"></i>Group Study
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- AI Assistance Level -->
                        <div class="mb-4">
                            <h6>AI Assistance Level</h6>
                            <p class="text-muted small">Choose how much AI guidance you want</p>
                            <div class="range-slider">
                                <input type="range" class="form-range" min="1" max="5" value="3" id="aiAssistanceLevel">
                                <div class="d-flex justify-content-between">
                                    <small>Minimal</small>
                                    <small>Balanced</small>
                                    <small>Maximum</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Other tabs would continue here... -->
                <!-- I'll create the remaining tabs (notifications, privacy, achievements, account) in the JavaScript section -->

            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        class ProfileManager {
            constructor() {
                this.currentTab = 'overview';
                this.userPreferences = {
                    studyTimes: ['afternoon'],
                    sessionDuration: 45,
                    breakDuration: 10,
                    environment: ['quiet', 'group'],
                    aiLevel: 3
                };
                this.init();
            }

            init() {
                this.setupTabNavigation();
                this.setupPreferenceCards();
                this.loadUserData();
                this.initializeCharts();
                this.setupEventListeners();
            }

            setupTabNavigation() {
                const navLinks = document.querySelectorAll('.nav-pills .nav-link');
                navLinks.forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        const targetTab = link.getAttribute('data-tab');
                        this.switchTab(targetTab);
                    });
                });
            }

            switchTab(tabName) {
                // Hide all tabs
                document.querySelectorAll('.tab-content').forEach(tab => {
                    tab.classList.add('d-none');
                });

                // Show target tab
                const targetTab = document.getElementById(tabName);
                if (targetTab) {
                    targetTab.classList.remove('d-none');
                }

                // Update nav links
                document.querySelectorAll('.nav-pills .nav-link').forEach(link => {
                    link.classList.remove('active');
                });
                document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');

                this.currentTab = tabName;

                // Load tab-specific content
                this.loadTabContent(tabName);
            }

            loadTabContent(tabName) {
                switch(tabName) {
                    case 'analytics':
                        this.updateAnalyticsCharts();
                        break;
                    case 'preferences':
                        this.loadPreferences();
                        break;
                    case 'notifications':
                        this.createNotificationsTab();
                        break;
                    case 'privacy':
                        this.createPrivacyTab();
                        break;
                    case 'achievements':
                        this.createAchievementsTab();
                        break;
                    case 'account':
                        this.createAccountTab();
                        break;
                }
            }

            setupPreferenceCards() {
                const cards = document.querySelectorAll('.preference-card');
                cards.forEach(card => {
                    card.addEventListener('click', () => {
                        const time = card.getAttribute('data-time');
                        card.classList.toggle('selected');
                        this.updatePreferences();
                    });
                });
            }

            async loadUserData() {
                try {
                    // In a real app, this would fetch from the API
                    const response = await fetch('/api/analytics/dashboard');
                    const data = await response.json();

                    this.updateProfileStats(data);
                } catch (error) {
                    console.error('Error loading user data:', error);
                    this.loadMockData();
                }
            }

            updateProfileStats(data) {
                document.getElementById('studyEfficiency').textContent = Math.round(data.efficiency || 85) + '%';
                document.getElementById('currentStreak').textContent = data.dayStreak || 7;
                document.getElementById('totalHours').textContent = Math.round(data.studyHoursWeek * 4 || 127);
            }

            loadMockData() {
                // Mock data for demo
                document.getElementById('studyEfficiency').textContent = '85%';
                document.getElementById('currentStreak').textContent = '7';
                document.getElementById('totalSessions').textContent = '45';
                document.getElementById('totalHours').textContent = '127';
            }

            initializeCharts() {
                // Weekly Study Pattern Chart
                const weeklyCtx = document.getElementById('weeklyChart');
                if (weeklyCtx) {
                    new Chart(weeklyCtx, {
                        type: 'bar',
                        data: {
                            labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                            datasets: [{
                                label: 'Study Hours',
                                data: [3, 4, 2, 5, 3, 6, 2],
                                backgroundColor: 'rgba(102, 126, 234, 0.6)',
                                borderColor: 'rgba(102, 126, 234, 1)',
                                borderWidth: 1
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            scales: {
                                y: {
                                    beginAtZero: true
                                }
                            }
                        }
                    });
                }

                // Subject Distribution Chart
                const subjectCtx = document.getElementById('subjectChart');
                if (subjectCtx) {
                    new Chart(subjectCtx, {
                        type: 'doughnut',
                        data: {
                            labels: ['Mathematics', 'Computer Science', 'Physics', 'English', 'Others'],
                            datasets: [{
                                data: [30, 25, 20, 15, 10],
                                backgroundColor: [
                                    '#FF6384',
                                    '#36A2EB',
                                    '#FFCE56',
                                    '#4BC0C0',
                                    '#9966FF'
                                ]
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false
                        }
                    });
                }

                // Performance Trends Chart
                const performanceCtx = document.getElementById('performanceChart');
                if (performanceCtx) {
                    new Chart(performanceCtx, {
                        type: 'line',
                        data: {
                            labels: Array.from({length: 30}, (_, i) => `Day ${i + 1}`),
                            datasets: [{
                                label: 'Study Efficiency',
                                data: Array.from({length: 30}, () => Math.floor(Math.random() * 20) + 70),
                                borderColor: 'rgba(102, 126, 234, 1)',
                                backgroundColor: 'rgba(102, 126, 234, 0.1)',
                                tension: 0.4
                            }]
                        },
                        options: {
                            responsive: true,
                            scales: {
                                y: {
                                    beginAtZero: false,
                                    min: 60,
                                    max: 100
                                }
                            }
                        }
                    });
                }
            }

            updateAnalyticsCharts() {
                // Update charts with real data when analytics tab is shown
                console.log('Updating analytics charts...');
            }

            setupEventListeners() {
                // Profile form submission
                document.getElementById('profileForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.saveProfile();
                });

                // Avatar upload
                document.getElementById('avatarUpload').addEventListener('change', (e) => {
                    this.handleAvatarUpload(e);
                });

                // AI assistance level slider
                const aiSlider = document.getElementById('aiAssistanceLevel');
                if (aiSlider) {
                    aiSlider.addEventListener('input', (e) => {
                        this.updateAILevel(e.target.value);
                    });
                }
            }

            saveProfile() {
                const formData = new FormData(document.getElementById('profileForm'));
                const profileData = Object.fromEntries(formData);

                // Show success message
                this.showNotification('Profile updated successfully!', 'success');

                // In a real app, this would send to the API
                console.log('Saving profile:', profileData);
            }

            handleAvatarUpload(event) {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        document.getElementById('profileAvatar').src = e.target.result;
                        this.showNotification('Profile photo updated!', 'success');
                    };
                    reader.readAsDataURL(file);
                }
            }

            updatePreferences() {
                const selectedTimes = Array.from(document.querySelectorAll('.preference-card.selected'))
                    .map(card => card.getAttribute('data-time'));

                this.userPreferences.studyTimes = selectedTimes;
                console.log('Updated preferences:', this.userPreferences);
            }

            updateAILevel(level) {
                this.userPreferences.aiLevel = parseInt(level);
                console.log('AI assistance level updated:', level);
            }

            showNotification(message, type = 'info') {
                // Create and show a toast notification
                const toast = document.createElement('div');
                toast.className = `alert alert-${type} alert-dismissible position-fixed top-0 end-0 m-3`;
                toast.style.zIndex = '9999';
                toast.innerHTML = `
                    ${message}
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                `;
                document.body.appendChild(toast);

                setTimeout(() => {
                    toast.remove();
                }, 3000);
            }

            // Create remaining tabs dynamically
            createNotificationsTab() {
                const notificationsTab = document.getElementById('notifications');
                if (notificationsTab && !notificationsTab.hasChildNodes()) {
                    notificationsTab.innerHTML = `
                        <div class="settings-section">
                            <h5 class="mb-4">
                                <i class="fas fa-bell text-warning me-2"></i>
                                Notification Settings
                            </h5>

                            <div class="mb-4">
                                <h6>Study Reminders</h6>
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <div>
                                        <strong>Daily Study Reminders</strong>
                                        <p class="text-muted small mb-0">Get notified when it's time to study</p>
                                    </div>
                                    <label class="toggle-switch">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>

                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <div>
                                        <strong>Break Reminders</strong>
                                        <p class="text-muted small mb-0">Reminders to take breaks during study sessions</p>
                                    </div>
                                    <label class="toggle-switch">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>

                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <div>
                                        <strong>Goal Achievements</strong>
                                        <p class="text-muted small mb-0">Celebrate when you reach your study goals</p>
                                    </div>
                                    <label class="toggle-switch">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                            </div>

                            <div class="mb-4">
                                <h6>AI Assistant Notifications</h6>
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <div>
                                        <strong>Study Recommendations</strong>
                                        <p class="text-muted small mb-0">Receive personalized study suggestions</p>
                                    </div>
                                    <label class="toggle-switch">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>

                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <div>
                                        <strong>Performance Insights</strong>
                                        <p class="text-muted small mb-0">Weekly performance summaries and tips</p>
                                    </div>
                                    <label class="toggle-switch">
                                        <input type="checkbox">
                                        <span class="slider"></span>
                                    </label>
                                </div>
                            </div>

                            <div class="text-end">
                                <button class="btn btn-primary">Save Notification Settings</button>
                            </div>
                        </div>
                    `;
                }
            }

            createPrivacyTab() {
                const privacyTab = document.getElementById('privacy');
                if (privacyTab && !privacyTab.hasChildNodes()) {
                    privacyTab.innerHTML = `
                        <div class="settings-section">
                            <h5 class="mb-4">
                                <i class="fas fa-shield-alt text-success me-2"></i>
                                Privacy & Security Settings
                            </h5>

                            <div class="mb-4">
                                <h6>Data Privacy</h6>
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <div>
                                        <strong>Share Analytics for AI Improvement</strong>
                                        <p class="text-muted small mb-0">Help improve AI recommendations (data is anonymized)</p>
                                    </div>
                                    <label class="toggle-switch">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>

                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <div>
                                        <strong>Profile Visibility</strong>
                                        <p class="text-muted small mb-0">Make your profile visible to study group members</p>
                                    </div>
                                    <label class="toggle-switch">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                            </div>

                            <div class="mb-4">
                                <h6>Account Security</h6>
                                <div class="mb-3">
                                    <button class="btn btn-outline-primary me-2">Change Password</button>
                                    <button class="btn btn-outline-success me-2">Enable 2FA</button>
                                    <button class="btn btn-outline-info">Download My Data</button>
                                </div>
                            </div>

                            <div class="alert alert-info">
                                <i class="fas fa-info-circle me-2"></i>
                                Your study data is encrypted and stored securely. We never share personal information with third parties.
                            </div>
                        </div>
                    `;
                }
            }

            createAchievementsTab() {
                const achievementsTab = document.getElementById('achievements');
                if (achievementsTab && !achievementsTab.hasChildNodes()) {
                    achievementsTab.innerHTML = `
                        <div class="settings-section">
                            <h5 class="mb-4">
                                <i class="fas fa-trophy text-warning me-2"></i>
                                Achievements & Badges
                            </h5>

                            <div class="mb-4">
                                <h6>Recent Achievements</h6>
                                <div class="row">
                                    <div class="col-md-4 mb-3">
                                        <div class="achievement-badge text-center p-3">
                                            <i class="fas fa-fire fa-2x mb-2"></i>
                                            <h6>7-Day Streak!</h6>
                                            <small>Unlocked today</small>
                                        </div>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <div class="achievement-badge text-center p-3">
                                            <i class="fas fa-graduation-cap fa-2x mb-2"></i>
                                            <h6>Study Master</h6>
                                            <small>100+ sessions completed</small>
                                        </div>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <div class="achievement-badge text-center p-3">
                                            <i class="fas fa-users fa-2x mb-2"></i>
                                            <h6>Team Player</h6>
                                            <small>Joined 5 study groups</small>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="mb-4">
                                <h6>Progress Towards Next Achievements</h6>
                                <div class="card p-3 mb-2">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div>
                                            <strong>üìö Bookworm</strong>
                                            <small class="text-muted d-block">Complete 200 study sessions</small>
                                        </div>
                                        <div class="text-end">
                                            <div class="progress" style="width: 100px; height: 8px;">
                                                <div class="progress-bar" style="width: 75%"></div>
                                            </div>
                                            <small class="text-muted">150/200</small>
                                        </div>
                                    </div>
                                </div>

                                <div class="card p-3 mb-2">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div>
                                            <strong>‚ö° Speed Learner</strong>
                                            <small class="text-muted d-block">Maintain 90%+ efficiency for 30 days</small>
                                        </div>
                                        <div class="text-end">
                                            <div class="progress" style="width: 100px; height: 8px;">
                                                <div class="progress-bar" style="width: 23%"></div>
                                            </div>
                                            <small class="text-muted">7/30 days</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                }
            }

            createAccountTab() {
                const accountTab = document.getElementById('account');
                if (accountTab && !accountTab.hasChildNodes()) {
                    accountTab.innerHTML = `
                        <div class="settings-section">
                            <h5 class="mb-4">
                                <i class="fas fa-user-cog text-danger me-2"></i>
                                Account Management
                            </h5>

                            <div class="mb-4">
                                <h6>Account Status</h6>
                                <div class="alert alert-success">
                                    <i class="fas fa-check-circle me-2"></i>
                                    Your account is active and in good standing
                                </div>

                                <div class="row">
                                    <div class="col-md-6">
                                        <p><strong>Member Since:</strong> September 2024</p>
                                        <p><strong>Plan:</strong> Free Plan</p>
                                        <p><strong>Total Study Time:</strong> 127 hours</p>
                                    </div>
                                    <div class="col-md-6">
                                        <p><strong>Last Login:</strong> Today, 2:30 PM</p>
                                        <p><strong>Study Streak:</strong> 7 days</p>
                                        <p><strong>Achievements:</strong> 12 badges earned</p>
                                    </div>
                                </div>
                            </div>

                            <div class="mb-4">
                                <h6>Account Actions</h6>
                                <div class="d-flex gap-2 flex-wrap">
                                    <button class="btn btn-success">
                                        <i class="fas fa-crown me-1"></i>Upgrade to Premium
                                    </button>
                                    <button class="btn btn-info">
                                        <i class="fas fa-download me-1"></i>Export Data
                                    </button>
                                    <button class="btn btn-warning">
                                        <i class="fas fa-pause me-1"></i>Deactivate Account
                                    </button>
                                </div>
                            </div>

                            <div class="alert alert-danger">
                                <h6><i class="fas fa-exclamation-triangle me-2"></i>Danger Zone</h6>
                                <p class="mb-2">Once you delete your account, there is no going back. Please be certain.</p>
                                <button class="btn btn-outline-danger btn-sm">Delete Account</button>
                            </div>
                        </div>
                    `;
                }
            }
        }

        // Initialize the profile manager when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            window.profileManager = new ProfileManager();
        });
    </script>
</body>
</html>
