<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

<h:head>
    <title>অধ্যয়ন সঙ্ঘ - JSF Schedules</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali:wght@400;600;700&display=swap" rel="stylesheet"/>
</h:head>

<h:body>
    <div class="container mt-4">
        <h2 class="bengali-title mb-4">
            <i class="fas fa-calendar-alt me-2"></i>Study Schedules (JSF)
        </h2>

        <h:form id="scheduleForm">
            <div class="row mb-3">
                <div class="col-md-4">
                    <h:inputText styleClass="form-control"
                                value="#{scheduleBean.filterSubject}"
                                placeholder="Filter by subject..."/>
                </div>
                <div class="col-md-2">
                    <h:commandButton styleClass="btn btn-primary"
                                   value="Filter"
                                   action="#{scheduleBean.filterBySubject}"/>
                </div>
            </div>

            <p:dataTable value="#{scheduleBean.schedules}"
                        var="schedule"
                        styleClass="table table-striped"
                        emptyMessage="No schedules found">

                <p:column headerText="Subject">
                    <h:outputText value="#{schedule.subject}"/>
                </p:column>

                <p:column headerText="Scheduled Time">
                    <h:outputText value="#{schedule.scheduledTime}">
                        <f:convertDateTime pattern="MMM dd, yyyy HH:mm"/>
                    </h:outputText>
                </p:column>

                <p:column headerText="Duration">
                    <h:outputText value="#{schedule.duration} minutes"/>
                </p:column>

                <p:column headerText="Priority">
                    <span class="badge bg-#{schedule.priority == 'HIGH' ? 'danger' : (schedule.priority == 'MEDIUM' ? 'warning' : 'info')}">
                        <h:outputText value="#{schedule.priority}"/>
                    </span>
                </p:column>

                <p:column headerText="Status">
                    <span class="badge bg-#{schedule.completed ? 'success' : 'secondary'}">
                        <h:outputText value="#{schedule.completed ? 'Completed' : 'Pending'}"/>
                    </span>
                </p:column>

                <p:column headerText="Actions">
                    <h:commandButton styleClass="btn btn-sm btn-info me-1"
                                   value="View"
                                   action="#{scheduleBean.selectSchedule(schedule)}"/>
                </p:column>
            </p:dataTable>
        </h:form>
    </div>
</h:body>
</html>
